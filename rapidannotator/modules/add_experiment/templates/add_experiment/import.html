{% extends "add_experiment/base.html" %}
{% from "macros.html" import render_field %}

{% block title %} Add Experiment Page {% endblock title %}
{% block head %}
  {{ super() }}
  <style type="text/css">
    .important { color: #336699; }
  </style>
{% endblock head %}

{% block experiment_body %}
<div class="container">
    <div>
      <div class="pull-left">
        <a href="{{ url_for('add_experiment.editLabels', experimentId = import_experiment.id) }}" 
          class="btn btn-danger btn-group btn-group-inline btn-space">{{ ('Go to Label Page') }}
        </a>
      </div>
      <h2 style="text-align:center"> Import Annotation Levels</h2>
    </div>
    <hr>
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Serial No.</th>
          <th>Annotation Level Name</th>
          <th>Owner</th>
          <th>Import</th>
        </tr>
      </thead>
      <tbody>
        {% for annotation_levels in global_annotation_level%}
          <tr >
            <td> {{loop.index}} </td>
            <td>
              <select>
                {% for level in annotation_levels %}
                  <optgroup label="Description: {{level.description}}">
                    <option value="{{level.name}}">{{level.name}}</option>
                  </optgroup>
                {% endfor %}
              </select>
            </td>
            <td>
                <select>
                  <optgroup label="Owners">
                    {% for owner in owners[loop.index - 1]%}
                      <option value="1">{{owner.username}}</option>
                    {% endfor %}
                  </optgroup>
                </select>
            </td>
			<td > <button type="button" class="btn btn-primary btn-group btn-group-inline btn-space" onclick="importLevels({{import_id[loop.index-1]}})"> Import </button></td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <script charset="utf-8" type="text/javascript">

	function importLevels(exportExperimentId){
		var data = {
			'exportExperimentId' :  exportExperimentId,
			'importExperimentId' : {{import_experiment.id}},
		};
		var url = "{{url_for('add_experiment._addImportedLevels')}}";
		console.log(data);
		$.getJSON(url , data, function(response) {
			if(response.success) {
				console.log("--------Test Ok ----------------- ")
			}
			else {
			}
		});
	};

  </script>

{% endblock experiment_body %}
